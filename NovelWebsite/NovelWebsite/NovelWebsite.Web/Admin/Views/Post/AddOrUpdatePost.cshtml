@using System.Web
@{
    Layout = "~/Areas/Admin/Views/Shared/_Layout.cshtml";
    string error = TempData["error"] as string;
    string alert = TempData["alert"] as string;
}

<link rel="stylesheet" href="~/css/admin/adminpost.css">

<div class="body flex-grow-1 px-3">
    <div class="container-lg">
        <div class="row">
            @*<div class="col-md-3">
                <div class="box box-primary">
                    <div class="box-body box-profile" id="author-info">
                    </div>
                </div>
            </div>*@
            <!-- /.col -->
            <div class="col-md-12">
                <div class="box box-primary">
                    <form method="post" action="/Admin/Post/AddOrUpdatePost" id="upload-post">
                        <div class="box-header with-border">
                            <h3 class="box-title">Quản lý bài viết</h3>
                        </div>
                        <div class="box-body">
                            <input type="text" name="userid" value="@Model.UserId" hidden />
                            <input type="text" name="postid" value="@Model.PostId" hidden />
                            <div class="form-group">
                                <label for="exampleInputFile">Title</label>
                                <input class="form-control" placeholder="Tiêu đề:" value="@(Model == null ? "" : Model.Title)" name="title" required>
                            </div>
                            <div class="form-group">
                                <label for="exampleInputFile">Description</label>
                                <input class="form-control" placeholder="Description:" value="@(Model == null ? "" : Model.Description)" name="description">
                            </div>
                            <div class="form-group form-content-block">
                                <label for="exampleInputFile">Nội dung</label>
                                @*<textarea id="txt-content" class="form-control" style="height: 300px" name="content" value="@Html.Raw(Model == null ? "" : Model.Content)"></textarea>*@
                                @*<div id="toolbar-container"></div>
                                <div id="editor"></div>*@
                            </div>
                            @*<div class="form-group">
                                <label for="exampleInputFile">Category</label>
                                <select class="form-control select2" id="category-blog" style="width: 100%;">
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="exampleInputFile">Tags</label><br />
                                @{
                                    var tags = "";
                                    if (Model != null)
                                    {
                                        foreach (var tag in Model.Tag)
                                        {
                                            tags += tag + ",";
                                        }
                                    }
                                }
                                <input type="text" class="form-control" placeholder="Tags:" value="@tags" name="tag" id="tags-input" data-role="tagsinput">
                            </div>
                            <div class="form-group">
                                <label for="exampleInputFile">Ảnh đại diện</label>
                                <div class="col-md-12 text-center img-upload">
                                    <img src="@(Model != null ? Model.Avatar : "/image/logo.jpg")" id="image-upload" class="rounded mx-auto d-block" style="width: 256px" />
                                </div>
                                <input type="file" id="image-upload" name="fileUpload" class="input-file">
                                <p class="help-block">Chọn ảnh đại diện cho bài viết</p>
                            </div>*@
                            <div class="input-comment">
                                <div id="post-toolbar"></div>
                                <div id="post-editor" class="input--box">@Html.Raw(HttpUtility.HtmlDecode(Model == null ? "" : Model.Content))</div>
                                <input type="text" name="content" hidden/>
                            </div>
                        </div>
                        <!-- /.box-body -->
                        <div class="box-footer">
                            <div class="pull-right">
                                <button type="submit" class="btn btn-primary btnsubmit float-end" name="submit"><i class="fa fa-envelope"></i>Gửi đi</button>
                            </div>
                        </div>

                    </form>
                    <!-- /.box-footer -->
                </div>
                <!-- /. box -->
            </div>
            <!-- /.col -->
        </div>
    </div>
</div>

@section Scripts{
    <script>
        var content = "@Html.Raw(Model.Content)";
        console.log(content);
    </script>
    
    <script type="text/javascript" src="~/content/admin/post.js"></script>
}

